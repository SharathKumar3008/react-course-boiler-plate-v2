(this["webpackJsonpexpensify-app"]=this["webpackJsonpexpensify-app"]||[]).push([[0],{269:function(e,t){},312:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(29),r=n.n(c),i=n(14),o=n(12),u=n(20),d=n(59);n(172),n(174);n(177).config();d.a.initializeApp({apiKey:"AIzaSyC2vHS_Z4q01b71ASiK7VyK32IFcVgYPoA",authDomain:"expensify-81e1a.firebaseapp.com",databaseURL:"https://expensify-81e1a-default-rtdb.firebaseio.com",projectId:"expensify-81e1a",storageBucket:"expensify-81e1a.appspot.com",messagingSenderId:"976210844887",appId:"1:976210844887:web:8895044275d9618fe26492"});var j=d.a.database(),h=new d.a.auth.GoogleAuthProvider,l=n(2),p=Object(i.b)(void 0,(function(e){return{startLogin:function(){return e((function(){return d.a.auth().signInWithPopup(h)}))}}}))((function(e){var t=e.startLogin;return Object(l.jsx)("div",{className:"box-layout",children:Object(l.jsxs)("div",{className:"box-layout__box",children:[Object(l.jsx)("h1",{className:"box-layout__title",children:"Expensify"}),Object(l.jsx)("p",{children:"It's time to get your expenses under control."}),Object(l.jsx)("button",{className:"button",onClick:t,children:"Login with Google"})]})})})),b=n(9),O=n(30),x=n(7),f=n.n(x),m=n(70),v=n.n(m),g=function(e,t){var n=e.id,a=e.description,s=e.amount,c=e.createdAt;return Object(l.jsxs)(O.a,{className:"list-item",to:"/edit/".concat(n),children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{className:"list-item__title",children:a}),Object(l.jsx)("span",{className:"list-item__subtitle",children:f()(c).format("MMMM Do, YYYY")})]}),Object(l.jsx)("h3",{className:"list-item__data",children:v()(s/100).format("$0,0.00")})]})},_=function(e,t){var n=t.text,a=t.sortBy,s=t.startDate,c=t.endDate;return e.filter((function(e){var t=f()(e.createdAt),a=!s||s.isSameOrBefore(t,"day"),r=!c||c.isSameOrAfter(t,"day"),i=e.description.toLowerCase().includes(n.toLowerCase());return a&&r&&i})).sort((function(e,t){return"date"===a?e.createdAt<t.createdAt?1:-1:"amount"!==a||(e.amount<t.amount?1:-1)}))},E=Object(i.b)((function(e){return{expenses:_(e.expenses,e.filters)}}))((function(e){return Object(l.jsxs)("div",{className:"content-container",children:[Object(l.jsxs)("div",{className:"list-header",children:[Object(l.jsx)("div",{className:"show-for-mobile",children:"Expenses"}),Object(l.jsx)("div",{className:"show-for-desktop",children:"Expense"}),Object(l.jsx)("div",{className:"show-for-desktop",children:"Amount"})]}),Object(l.jsx)("div",{className:"list-body",children:e.expenses.length?Object(l.jsx)("div",{children:e.expenses.map((function(e){return Object(l.jsx)(g,Object(b.a)({},e),e.id)}))}):Object(l.jsx)("div",{className:"list-item list-item--message",children:Object(l.jsx)("span",{children:"No Expenses"})})})]})})),N=n(50),D=n(51),y=n(53),S=n(52),A=function(e){return{type:"SET_START_DATE",startDate:e}},C=function(e){return{type:"SET_END_DATE",endDate:e}},T=n(71),I=function(e){Object(y.a)(n,e);var t=Object(S.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).onDateChange=function(e){var t=e.startDate,n=e.endDate;return a.props.onDateChange(t,n),a.setState({startDate:t,endDate:n})},a.state={startDate:a.props.startDate,endDate:a.props.endDate,focusedInput:null},a}return Object(D.a)(n,[{key:"render",value:function(){var e=this;return Object(l.jsx)("div",{children:Object(l.jsx)(T.DateRangePicker,{startDate:this.state.startDate,startDateId:"start_date_id",endDate:this.state.endDate,endDateId:"end_date_id",focusedInput:this.state.focusedInput,onDatesChange:this.onDateChange,onFocusChange:function(t){return e.setState({focusedInput:t})},numberOfMonths:1,isOutsideRange:function(){return!1},showClearDates:!0})})}}]),n}(s.a.Component),w=function(e){Object(y.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(N.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).onDateChange=function(t,n){e.props.dispatch(A(t)),e.props.dispatch(C(n))},e}return Object(D.a)(n,[{key:"render",value:function(){var e=this;return Object(l.jsx)("div",{className:"content-container",children:Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("div",{className:"input-group__item",children:Object(l.jsx)("input",{type:"text",className:"text-input",placeholder:"Search expenses",value:this.props.filters.text,onChange:function(t){e.props.dispatch(function(){return{type:"SET_TEXT_FILTER",text:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}(t.target.value))}})}),Object(l.jsx)("div",{className:"input-group__item",children:Object(l.jsxs)("select",{className:"select",value:this.props.filters.sortBy,onChange:function(t){"amount"===t.target.value?e.props.dispatch({type:"SORT_BY_AMOUNT"}):"date"===t.target.value&&e.props.dispatch({type:"SORT_BY_DATE"})},children:[Object(l.jsx)("option",{value:"date",children:"Date"}),Object(l.jsx)("option",{value:"amount",children:"Amount"})]})}),Object(l.jsx)("div",{className:"input-group__item",children:Object(l.jsx)(I,{startDate:this.props.filters.startDate,endDate:this.props.filters.endDate,onDateChange:this.onDateChange})})]})})}}]),n}(s.a.Component),k=Object(i.b)((function(e){return{filters:e.filters}}))(w),L=function(e){return e.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0)},P=Object(i.b)((function(e){var t=_(e.expenses,e.filters);return{expenseTotal:L(t),expenseCount:t.length}}))((function(e){var t=e.expenseCount,n=e.expenseTotal,a=1===t?"expense":"expenses";return Object(l.jsx)("div",{className:"page-header",children:Object(l.jsxs)("div",{className:"content-container",children:[Object(l.jsxs)("h1",{className:"page-header__title",children:["Viewing ",Object(l.jsx)("span",{children:t})," ",a," totalling ",Object(l.jsx)("span",{children:v()(n/100).format("$0,0.00")})]}),Object(l.jsx)("div",{className:"page-header__actions",children:Object(l.jsx)(O.a,{className:"button",to:"/create",children:"Add Expense"})})]})})})),R=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(P,{}),Object(l.jsx)(k,{}),Object(l.jsx)(E,{})]})},B=n(90);function X(e){var t=Object(a.useState)(e.createdAt),n=Object(B.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(!1),i=Object(B.a)(r,2),o=i[0],u=i[1];return Object(l.jsx)(T.SingleDatePicker,{id:"date_input",date:s,focused:o,onDateChange:function(t){t&&(e.onDateChange(t),c(t))},onFocusChange:function(e){var t=e.focused;u(t)},numberOfMonths:1,isOutsideRange:function(e){return!1}})}var M=function(e){Object(y.a)(n,e);var t=Object(S.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).onDescriptionChange=function(e){var t=e.target.value;a.setState((function(){return{description:t}}))},a.onNotesChange=function(e){var t=e.target.value;a.setState((function(){return{note:t}}))},a.onAmountChange=function(e){var t=e.target.value;t&&!t.match(/^\d{1,}(\.\d{0,2})?$/)||a.setState((function(){return{amount:t}}))},a.onDateChange=function(e){a.setState((function(){return{createdAt:e}}))},a.onSubmit=function(e){e.preventDefault(),a.state.description&&a.state.amount?(a.setState((function(){return{error:""}})),a.props.onSubmit({description:a.state.description,amount:100*parseFloat(a.state.amount,10),createdAt:a.state.createdAt.valueOf(),note:a.state.note})):a.setState((function(){return{error:"Please provide Description and Amount."}}))},a.state={description:e.expense?e.expense.description:"",note:e.expense?e.expense.note:"",amount:e.expense?(e.expense.amount/100).toString():"",createdAt:e.expense?f()(e.expense.createdAt):f()(),calenderFocused:!1,error:""},a}return Object(D.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("form",{className:"form",onSubmit:this.onSubmit,children:[""!==this.state.error&&Object(l.jsx)("p",{className:"form__error",children:this.state.error}),Object(l.jsx)("input",{type:"text",className:"text-input",value:this.state.description,onChange:this.onDescriptionChange,placeholder:"description",autoFocus:!0}),Object(l.jsx)("input",{type:"text",className:"text-input",value:this.state.amount,onChange:this.onAmountChange,placeholder:"amount"}),Object(l.jsx)(X,{onDateChange:this.onDateChange,createdAt:this.state.createdAt||f()()}),Object(l.jsx)("textarea",{className:"textarea",placeholder:"Add a Note for your Expense(Optional)",value:this.state.note,onChange:this.onNotesChange}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"button",children:"Save Expense"})})]})}}]),n}(s.a.Component),Y=function(e){return{type:"ADD_EXPENSE",expense:e}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return{type:"REMOVE_EXPENSE",id:t}},G=Object(i.b)()((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"page-header",children:Object(l.jsx)("div",{className:"content-container",children:Object(l.jsx)("h1",{className:"page-header__title",children:"Add Expense"})})}),Object(l.jsx)("div",{className:"content-container",children:Object(l.jsx)(M,{onSubmit:function(t){e.dispatch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var a=n().auth.uid,s=e.description,c=void 0===s?"":s,r=e.note,i=void 0===r?"":r,o=e.amount,u=void 0===o?0:o,d=e.createdAt,h={description:c,note:i,amount:u,createdAt:void 0===d?0:d};j.ref("users/".concat(a,"/expenses")).push(h).then((function(e){t(Y(Object(b.a)({id:e.key},h)))}))}}(t)),e.history.push("/")}})})]})})),U=Object(i.b)((function(e,t){return{expense:e.expenses.find((function(e){return e.id===t.match.params.id}))}}))((function(e){return console.log("props",e),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"page-header",children:Object(l.jsx)("div",{className:"content-container",children:Object(l.jsx)("h1",{className:"page-header__title",children:"Add Expense"})})}),Object(l.jsxs)("div",{className:"content-container",children:[Object(l.jsx)(M,{expense:e.expense,onSubmit:function(t){var n,a;console.log(t),e.dispatch((n=e.expense.id,a=t,function(e,t){var s=t().auth.uid;return j.ref("users/".concat(s,"/expenses/").concat(n)).update(Object(b.a)({},a)).then((function(){e(function(e,t){return{type:"EDIT_EXPENSE",id:e,updates:t}}(n,a))}))})),e.history.push("/")}}),Object(l.jsx)("button",{className:"button button--secondary",onClick:function(){e.dispatch(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return function(t,n){var a=n().auth.uid;return j.ref("users/".concat(a,"/expenses/").concat(e)).remove().then((function(){t(F({id:e}))}))}}({id:e.expense.id})),e.history.push("/")},children:"Remove Expense"})]})]})})),V=function(){return Object(l.jsxs)("div",{children:["404 Page - ",Object(l.jsx)(O.a,{to:"/",children:"Go Home"})]})},K=n(73),$=Object(i.b)(void 0,(function(e){return{startLogout:function(){return e((function(){return d.a.auth().signOut()}))}}}))((function(e){var t=e.startLogout;return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("div",{className:"content-container",children:Object(l.jsxs)("div",{className:"header__content",children:[Object(l.jsx)(O.a,{className:"header__title",to:"/dashboard",children:Object(l.jsx)("h1",{children:"Expensify"})}),Object(l.jsx)("button",{className:"button button--link",onClick:t,children:"Logout"})]})})})})),z=["isAuthenticated","component"],H=Object(i.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,n=e.component,a=Object(K.a)(e,z);return Object(l.jsx)(o.b,Object(b.a)(Object(b.a)({},a),{},{component:function(e){return t?Object(l.jsxs)("div",{children:[Object(l.jsx)($,{}),Object(l.jsx)(n,Object(b.a)({},e))]}):Object(l.jsx)(o.a,{to:"/"})}}))})),J=["isAuthenticated","component"],q=Object(i.b)((function(e){return{isAuthenticated:!!e.auth.uid}}))((function(e){var t=e.isAuthenticated,n=e.component,a=Object(K.a)(e,J);return Object(l.jsx)(o.b,Object(b.a)(Object(b.a)({},a),{},{component:function(e){return t?Object(l.jsx)(o.a,{to:"/dashboard"}):Object(l.jsx)(n,Object(b.a)({},e))}}))})),W=Object(u.a)(),Z=function(){return Object(l.jsx)(o.c,{history:W,children:Object(l.jsx)("div",{children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(q,{path:"/",component:p,exact:!0}),Object(l.jsx)(H,{path:"/dashboard",component:R}),Object(l.jsx)(H,{path:"/create",component:G}),Object(l.jsx)(H,{path:"/edit/:id",component:U}),Object(l.jsx)(o.b,{component:V})]})})})},Q=n(61),ee=n(161),te=n(162),ne=[],ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":return[].concat(Object(te.a)(e),[t.expense]);case"REMOVE_EXPENSE":return e.filter((function(e){return e.id!==t.id}));case"EDIT_EXPENSE":return e.map((function(e){return e.id===t.id?Object(b.a)(Object(b.a)({},e),t.updates):e}));case"SET_EXPENSES":return t.expenses;default:return e}},se={text:"",sortBy:"date",startDate:f()().startOf("month"),endDate:f()().endOf("month")},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TEXT_FILTER":return Object(b.a)(Object(b.a)({},e),{},{text:t.text});case"SORT_BY_AMOUNT":return Object(b.a)(Object(b.a)({},e),{},{sortBy:"amount"});case"SORT_BY_DATE":return Object(b.a)(Object(b.a)({},e),{},{sortBy:"date"});case"SET_START_DATE":return Object(b.a)(Object(b.a)({},e),{},{startDate:t.startDate});case"SET_END_DATE":return Object(b.a)(Object(b.a)({},e),{},{endDate:t.endDate});default:return e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{uid:t.uid};case"LOGOUT":return{};default:return e}},ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.c,oe=function(){return Object(Q.d)(Object(Q.b)({expenses:ae,filters:ce,auth:re}),ie(Object(Q.a)(ee.a)))},ue=function(){return Object(l.jsx)("div",{className:"loader",children:Object(l.jsx)("img",{className:"loader__image",src:"../images/loader.gif"})})},de=(n(260),n(261),n(311),n(312),oe()),je=Object(l.jsx)(i.a,{store:de,children:Object(l.jsx)(Z,{})}),he=!1,le=function(){he||(r.a.render(je,document.getElementById("root")),he=!0)};r.a.render(Object(l.jsx)(ue,{}),document.getElementById("root")),d.a.auth().onAuthStateChanged((function(e){e?(console.log("uid",e.uid),de.dispatch({type:"LOGIN",uid:e.uid}),de.dispatch((function(e,t){var n=t().auth.uid,a=[];return j.ref("users/".concat(n,"/expenses")).once("value").then((function(t){t.forEach((function(e){a.push(Object(b.a)({id:e.key},e.val()))})),e(function(e){return{type:"SET_EXPENSES",expenses:e}}(a))}))})).then((function(){le(),"/"===W.location.pathname&&W.push("/dashboard")}))):(de.dispatch({type:"LOGOUT"}),le(),W.push("/"))}))}},[[313,1,2]]]);
//# sourceMappingURL=main.095d1e5d.chunk.js.map